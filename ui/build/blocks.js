"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var B__1=function(){function B__1(id){_classCallCheck(this,B__1);this.id=id;this.data=new Map;this._2_a=new Set(["constructor","_g_c","get","listSubTypes","_lasbt","_la","_laa","_lb","_lab","lisAncestors","_aspt","_lspt"])}_createClass(B__1,[{key:"RQ0",value:function RQ0(test,msg){console.assert(test,msg)}},{key:"_3_2",value:function _3_2(action){return this[action]}},{key:"_3_1",value:function _3_1(action){if(this[action]&&!this._2_a.has(action)&&!action.startsWith("_")){var p=Object.getPrototypeOf(this);delete p[action];this.log("removed bootstrap action: "+action);this._3_3()}}},{key:"_3_3",value:function _3_3(){var functions=Object.getOwnPropertyNames(Object.getPrototypeOf(this));var result="";var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=functions[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var f=_step.value;if(f!="constructor"&&f!="RQ0"&&!f.startsWith("_")){result+=f+", "}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}this.log("bootstrap actions: "+result)}},{key:"log",value:function log(msg){console.log(msg)}},{key:"x0",value:function x0(action,param,extraParams){var _2_s=B__1._2_s;_2_s.RQ0(_2_s!=null,"This instance has not been bootstrapped.");var doExecute=true;var prePostExecute=action=="preExecute"||action=="postExecute"||action=="_la"||action=="_g_c";if(!prePostExecute){try{doExecute=_2_s.x0_.bind(this)("preExecute",{action:action,param:param})}catch(e){}}var result=void 0;try{result=_2_s.x0_.bind(this)(action,param,extraParams)}catch(error){try{doExecute=_2_s.x0_.bind(this)("errorExecute",{action:action,param:param,error:error})}catch(e){}throw error}if(!prePostExecute){try{return _2_s.x0_.bind(this)("postExecute",{action:action,param:param,result:result})}catch(e){}}return result}},{key:"x0_",value:function x0_(action,param,extraParams){var _2_s=B__1._2_s;var output=void 0;var _0_1=_2_s._3_2(action);if(_0_1){output=_0_1.bind(this)(param,extraParams);return output}var _0_3=_2_s._laa.bind(this)();if(_0_3&&_0_3.has(action)){var actionInstances=_0_3.get(action);var _output=void 0;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=actionInstances[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var actionInstance=_step2.value;var __0_1=actionInstance.x0("_g_c");if(__0_1){_output=__0_1.bind(this)(param,_output,extraParams)}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return _output}throw"ACTION_NOT_FOUND: "+action}},{key:"new",value:function _new(param){var _2_s=B__1._2_s;var _2_2=new C__0(param);_2_s._aspt.bind(_2_2)(this);_2_s.add.bind(this)(_2_2);_2_s.data.set(param,_2_2);return _2_2}},{key:"get",value:function get(id){var _2_s=B__1._2_s;return _2_s.data.get(id)}},{key:"_gbt",value:function _gbt(){var _2_s=B__1._2_s;var _0_4s=_2_s._lan.bind(this)().toArray();var pos=0;if(_0_4s.length>1){pos=Math.max(1,_0_4s.length-3)}var baseType=_0_4s[pos];return baseType}},{key:"_sc",value:function _sc(param){var _2_s=B__1._2_s;_2_s.RQ0(_2_s!=null,"Cannot auto link _sc without bootstrap support.");if(param==null){param=_2_s._3_2(this.id)}this.data.set("code",param)}},{key:"_g_c",value:function _g_c(){return this.data.get("code")}},{key:"_addToList",value:function _addToList(param,typeValue){var _2_s=B__1._2_s;var _2_t=this.data.get(typeValue);if(_2_t==null){_2_t=new B__3;this.data.set(typeValue,_2_t)}_2_t.set(param.id,param);this.data.set(typeValue,_2_t)}},{key:"add",value:function add(param){var _2_s=B__1._2_s;_2_s._addToList.bind(this)(param,"instances")}},{key:"_a_b",value:function _a_b(param){var _2_s=B__1._2_s;_2_s.RQ0(_2_s._3_0.bind(param)("behaviorType"),"_a_b requires a Behavior parameter.");_2_s._addToList.bind(this)(param,"behaviors")}},{key:"_a_a",value:function _a_a(param){var _2_s=B__1._2_s;_2_s.RQ0(_2_s._3_0.bind(param)("actionType"),"_a_a requires an Action parameter.");_2_s._addToList.bind(this)(param,"actions");_2_s._3_1(param.id)}},{key:"_aspt",value:function _aspt(param){var _2_s=B__1._2_s;_2_s._addToList.bind(this)(param,"_2_p");_2_s.add.bind(param)(this)}},{key:"listSubTypes",value:function listSubTypes(){return this.data.get("instances")}},{key:"_lb",value:function _lb(param){var behaviors=this.data.get("behaviors");if(param){var _ret=function(){var result=new B__3;if(behaviors){behaviors.forEach(function(value,key){var _2_p=value.x0("_lspt");if(_2_p.has(param)){result.set(value.id,value)}})}return{v:result}}();if((typeof _ret==="undefined"?"undefined":_typeof(_ret))==="object")return _ret.v}else{return behaviors}}},{key:"_lbg",value:function _lbg(){var result=new B__3;var behaviors=this.data.get("behaviors");if(behaviors){behaviors.forEach(function(value,key){var _2_p=value.x0("_lspt");result=B__3._2_0(result,_2_p)})}return result}},{key:"_la",value:function _la(){return this.data.get("actions")}},{key:"_lspt",value:function _lspt(){return this.data.get("_2_p")}},{key:"_lasbt",value:function _lasbt(_2_7){var _2_s=B__1._2_s;var result=new B__3;var instances=_2_s.listSubTypes.bind(this)();if(instances&&instances.size>0){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=instances.values()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var instance=_step3.value;var _0_x=instance;if(_2_7){_2_s.RQ0(_2_7.x0!=null,"The _2_7 must have an x0().");_0_x=_2_7.x0("applyFilter",instance)}if(_0_x){result.set(_0_x.id,_0_x)}var _2_n=_2_s._lasbt.bind(instance)(_2_7);result=B__3._2_0(result,_2_n)}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}return result}},{key:"_3_0",value:function _3_0(param){var _2_s=B__1._2_s;var _2_4=_2_s._lan.bind(this)();return _2_4.has(param)}},{key:"_lan",value:function _lan(){var _2_s=B__1._2_s;var _0_4s=new B__3;var toProcess=[this];while(toProcess.length){var instance=toProcess.shift();_0_4s.set(instance.id,instance);var _0_l=_2_s._lspt.bind(instance)();if(_0_l){_0_l.forEach(function(value,key){toProcess.push(value)})}}return _0_4s}},{key:"_lab",value:function _lab(param){var _2_s=B__1._2_s;var behaviors=void 0;var _0_4s=_2_s._lan.bind(this)().toArray();for(var i=_0_4s.length-1;i>=0;i--){var _2_5=_2_s._lb.bind(_0_4s[i])(param);behaviors=B__3._2_0(behaviors,_2_5)}return behaviors}},{key:"_laa",value:function _laa(){var _2_s=B__1._2_s;var behaviors=_2_s._lab.bind(this)();var actions=void 0;if(behaviors){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=behaviors.values()[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var bInstance=_step4.value;var bActions=_2_s._la.bind(bInstance)();actions=B__2._2_0(actions,bActions)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}}return actions}},{key:"_g_j",value:function _g_j(param){var _2_s=B__1._2_s;var result={id:this.id,behaviors:[]};var behaviors=this.x0("_lab");var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=behaviors.values()[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var b=_step5.value;var serializer=_2_s.x0.bind(b)("_g_c");if(serializer){var s=serializer.bind(this)();if(s){result.behaviors.push(s)}}else{throw this.id+" missing serializer for "+b.id}}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}return JSON.stringify(result,null,param)}},{key:"_sj",value:function _sj(json){var _2_s=B__1._2_s;var result=this.x0("new",json.id);var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=json.behaviors[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var behaviorData=_step6.value;var behavior=this.x0("get",behaviorData.id);var serializer=_2_s.x0.bind(behavior)("_g_c");if(serializer){serializer.bind(result)(behaviorData)}else{throw result.id+" missing serializer for "+behaviorData.id}}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}return result}}],[{key:"getInstance",value:function getInstance(){B__1._2_s=B__1._2_s||new B__1("v1");return B__1._2_s}}]);return B__1}();var B__2=function(){function B__2(){_classCallCheck(this,B__2);this.map=new Map}_createClass(B__2,[{key:"add",value:function add(k,v){var map=this.map.get(k);if(map==null){map=new Array;this.set(k,map)}map.push(v)}},{key:"set",value:function set(k,v){this.map.set(k,v)}},{key:"get",value:function get(k){return this.map.get(k)}},{key:"getAt",value:function getAt(k,i){return this.map.get(k)[i]}},{key:"has",value:function has(k){return this.map.has(k)&&this.map.get(k).length>0}},{key:"delete",value:function _delete(k,i){if(i==null){return this.map.delete(k)}else{return delete this.map.get(k)[i]}}},{key:"values",value:function values(){return this.map.values()}},{key:"forEach",value:function forEach(callbackfn,thisArg){this.map.forEach(callbackfn,thisArg)}},{key:"length",value:function length(k){return this.map.get(k).length}},{key:"toJSON",value:function toJSON(){return Array.from(this.map.keys())}},{key:"size",get:function get(){return this.map.size}}],[{key:"_2_0",value:function _2_0(map1,map2){if(map1){if(map2){var _ret2=function(){var newMap=new B__2;map1.forEach(function(value,key){newMap.set(key,value)});map2.forEach(function(value,key){newMap.add(key,value)});return{v:newMap}}();if((typeof _ret2==="undefined"?"undefined":_typeof(_ret2))==="object")return _ret2.v}else{return map1}}else if(map2){var _ret3=function(){var newMap=new B__2;map2.forEach(function(value,key){newMap.add(key,value)});return{v:newMap}}();if((typeof _ret3==="undefined"?"undefined":_typeof(_ret3))==="object")return _ret3.v}return null}}]);return B__2}();var B__3=function(){function B__3(){_classCallCheck(this,B__3);this.map=new Map}_createClass(B__3,[{key:"set",value:function set(k,v){this.map.set(k,v)}},{key:"get",value:function get(k){return this.map.get(k)}},{key:"has",value:function has(k){return this.map.has(k)}},{key:"delete",value:function _delete(k){return this.map.delete(k)}},{key:"keys",value:function keys(){return this.map.keys()}},{key:"values",value:function values(){return this.map.values()}},{key:"forEach",value:function forEach(callbackfn,thisArg){this.map.forEach(callbackfn,thisArg)}},{key:"toJSON",value:function toJSON(){return Array.from(this.map.keys())}},{key:"toArray",value:function toArray(){return Array.from(this.map.values())}},{key:"size",get:function get(){return this.map.size}}],[{key:"_2_0",value:function _2_0(map1,map2){var overwrite=arguments.length<=2||arguments[2]===undefined?true:arguments[2];if(map1){if(map2){var _ret4=function(){var newMap=new B__3;map1.forEach(function(value,key){newMap.set(key,value)});map2.forEach(function(value,key){if(overwrite||!overwrite&&!newMap.has(key)){newMap.set(key,value)}});return{v:newMap}}();if((typeof _ret4==="undefined"?"undefined":_typeof(_ret4))==="object")return _ret4.v}else{return map1}}else if(map2){return map2}return null}}]);return B__3}();var B__4=function(){function B__4(entity,_2_q){var inherited=arguments.length<=2||arguments[2]===undefined?false:arguments[2];var _0_7=arguments[3];var _0_8=arguments[4];_classCallCheck(this,B__4);this.entity=entity;this._2_q=_2_q;this.inherited=inherited;this._0_7=_0_7;this._0_8=_0_8}_createClass(B__4,[{key:"x0",value:function x0(action,param){var _entity;for(var _len=arguments.length,extraParams=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){extraParams[_key-2]=arguments[_key]}return(_entity=this.entity).x0.apply(_entity,[action,param].concat(extraParams))}},{key:"id",get:function get(){return this.entity.id}},{key:"data",get:function get(){return this.entity.data}}]);return B__4}();"use strict";var B__0=function(){function B__0(){_classCallCheck(this,B__0);this.types={};this.c_0p={}}_createClass(B__0,[{key:"init",value:function init(c_0p){this.c_0p=c_0p;this._2_b=new C__0(".guest-root");this._1_p();this._1_v();this._1_n();this._1_s();this._1_m();this._1_r();this._1_t();this._1_x();this._1_u();this._1_q();this._2_6()}},{key:"ext",value:function ext(c_0p){}},{key:"_1_p",value:function _1_p(){var coreType=this._2_b.x0("new","coreType");var behaviorType=coreType.x0("new","behaviorType");var actionType=coreType.x0("new","actionType");var entityType=coreType.x0("new","entityType");this.types={coreType:coreType,behaviorType:behaviorType,actionType:actionType,entityType:entityType};if(this.c_0p&&this.c_0p.log){this._1_o()}var hasBehaviors=behaviorType.x0("new","hasBehaviors");var hasActions=behaviorType.x0("new","hasActions");var isActionable=behaviorType.x0("new","isActionable");this._2_b.x0("_a_b",hasBehaviors);behaviorType.x0("_a_b",hasActions);actionType.x0("_a_b",isActionable);var _a_b=actionType.x0("new","_a_b");var removeBehavior=actionType.x0("new","removeBehavior");var _lb=actionType.x0("new","_lb");var _lab=actionType.x0("new","_lab");var _lbg=actionType.x0("new","_lbg");var listAllBehaviorGroups=actionType.x0("new","listAllBehaviorGroups");var _a_a=actionType.x0("new","_a_a");var removeAction=actionType.x0("new","removeAction");var _la=actionType.x0("new","_la");var _laa=actionType.x0("new","_laa");var _sc=actionType.x0("new","_sc");var _g_c=actionType.x0("new","_g_c");var newEntity=actionType.x0("new","new");newEntity.x0("_sc");_sc.x0("_sc");_g_c.x0("_sc");_a_a.x0("_sc");_la.x0("_sc");_laa.x0("_sc");_a_b.x0("_sc");_lb.x0("_sc");_lab.x0("_sc");removeAction.x0("_sc",function(param){var _2_s=B__1.getInstance();var actions=this.data.get("actions");actions.delete(param)});removeBehavior.x0("_sc",function(param){var _2_s=B__1.getInstance();var behaviors=this.data.get("behaviors");behaviors.delete(param)});_lbg.x0("_sc",function(param){var result=new B__3;var behaviors=this.data.get("behaviors");if(behaviors){behaviors.forEach(function(value,key){var _2_p=value.x0("_lspt");result=B__3._2_0(result,_2_p)})}return result});listAllBehaviorGroups.x0("_sc",function(){var result=new B__3;var behaviors=this.x0("_lab");if(behaviors){behaviors.forEach(function(value,key){var _2_p=value.x0("_lspt");result=B__3._2_0(result,_2_p)})}return result});hasBehaviors.x0("_a_a",newEntity);hasBehaviors.x0("_a_a",_a_b);hasBehaviors.x0("_a_a",removeBehavior);hasBehaviors.x0("_a_a",_lb);hasBehaviors.x0("_a_a",_lab);hasBehaviors.x0("_a_a",_lbg);hasBehaviors.x0("_a_a",listAllBehaviorGroups);hasActions.x0("_a_a",_a_a);hasActions.x0("_a_a",removeAction);hasActions.x0("_a_a",_la);hasActions.x0("_a_a",_laa);isActionable.x0("_a_a",_sc);isActionable.x0("_a_a",_g_c);var logs=this.types.logs;this.types={coreType:coreType,behaviorType:behaviorType,actionType:actionType,entityType:entityType,hasBehaviors:hasBehaviors,hasActions:hasActions,isActionable:isActionable,_a_b:_a_b,_lb:_lb,_sc:_sc,_g_c:_g_c,_lab:_lab,_lbg:_lbg,listAllBehaviorGroups:listAllBehaviorGroups,_a_a:_a_a,_la:_la,_laa:_laa,logs:logs,newEntity:newEntity,removeAction:removeAction,removeBehavior:removeBehavior}}},{key:"_1_v",value:function _1_v(){var _types=this.types;var coreType=_types.coreType;var behaviorType=_types.behaviorType;var actionType=_types.actionType;var entityType=_types.entityType;var referenceType=coreType.x0("new","referenceType");var component=referenceType.x0("new","component");var property=referenceType.x0("new","property");var system=referenceType.x0("new","system");var relationType=behaviorType.x0("new","relationType");var isA=relationType.x0("new","isA");var has=relationType.x0("new","has");var canBeA=relationType.x0("new","canBeA");var _aspt=actionType.x0("new","_aspt");var removeSuperType=actionType.x0("new","removeSuperType");var _lspt=actionType.x0("new","_lspt");var listSubTypes=actionType.x0("new","listSubTypes");var removeSubType=actionType.x0("new","removeSubType");var _nr=actionType.x0("new","_nr");var _a_r=actionType.x0("new","_a_r");var _rr=actionType.x0("new","_rr");var _g_r=actionType.x0("new","_g_r");var _l_r=actionType.x0("new","_l_r");var _u_r=actionType.x0("new","_u_r");_aspt.x0("_sc");_lspt.x0("_sc");removeSuperType.x0("_sc",function(param){var _2_p=this.data.get("_2_p");_2_p.delete(param)});listSubTypes.x0("_sc",function(){return this.data.get("instances")});removeSubType.x0("_sc",function(param){var _2_p=this.data.get("instances");_2_p.delete(param)});_nr.x0("_sc",function(_2_q,output,params){var _ref=params||[];var _ref2=_slicedToArray(_ref,3);var _ref2$=_ref2[0];var inherited=_ref2$===undefined?false:_ref2$;var _ref2$2=_ref2[1];var _0_7=_ref2$2===undefined?null:_ref2$2;var _ref2$3=_ref2[2];var _0_8=_ref2$3===undefined?null:_ref2$3;return new B__4(this,_2_q,inherited,_0_7,_0_8)});_a_r.x0("_sc",function(entity,output,params){var _2_s=B__1.getInstance();var references=this.data.get("references");if(references==null){references=new B__3;this.data.set("references",references)}if(entity instanceof B__4){references.set(entity.id,entity)}else{_2_s.RQ0(params&&params.length,"_a_r requires a _2_q parameter.");var ref=entity.x0("_nr",params[0]);references.set(entity.id,ref)}});_rr.x0("_sc",function(entityId){var references=this.data.get("references");references.delete(entityId)});_g_r.x0("_sc",function(id){var _2_s=B__1.getInstance();var aggregatedRefs=this.x0("_l_r");var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=aggregatedRefs.values()[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var ref=_step7.value;if(ref.id==id){return ref}var instance=ref;var refInst=void 0;while(instance){if(refInst){var references=instance.data.get("references");if(references){instance=references.get(refInst.id)}}refInst=instance._0_8||instance;if(refInst&&refInst.id==id){return ref}instance=instance._0_7}}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}return null});_l_r.x0("_sc",function(_2_q){var allReferences=new B__3;var overwrittenReferences=new B__3;var references=this.data.get("references");if(_2_q){if(references){references.forEach(function(_0_t,key){if(_0_t._2_q==_2_q){allReferences.set(key,_0_t);if(_0_t._0_8){overwrittenReferences.set(_0_t._0_8.id,_0_t)}}})}else{return null}}else if(references){references.forEach(function(_0_t,key){allReferences.set(key,_0_t);if(_0_t._0_8){overwrittenReferences.set(_0_t._0_8.id,_0_t)}})}var _2_p=this.x0("_lspt");if(_2_p){(function(){var allParentReferences=new B__3;_2_p.forEach(function(parent,key){var parentReferences=parent.x0("_l_r",_2_q);if(parentReferences){parentReferences.forEach(function(_0_t,key){if(!_0_t.inherited){_0_t=new B__4(_0_t.entity,_0_t._2_q,true,parent)}if(_0_t._0_8){overwrittenReferences.set(_0_t._0_8.id,_0_t)}if(!overwrittenReferences.has(_0_t.id)){allParentReferences.set(_0_t.id,_0_t)}else{}})}});if(allParentReferences.size){allReferences=B__3._2_0(allReferences,allParentReferences,false)}})()}return allReferences});_u_r.x0("_sc",function(entity){var _2_s=B__1.getInstance();var references=this.data.get("references");if(references==null){references=new B__3;this.data.set("references",references)}references.set(entity.id,entity)});isA.x0("_a_a",_aspt);isA.x0("_a_a",removeSuperType);isA.x0("_a_a",_lspt);isA.x0("_a_a",removeSubType);has.x0("_a_a",_a_r);has.x0("_a_a",_rr);has.x0("_a_a",_g_r);has.x0("_a_a",_l_r);has.x0("_a_a",_u_r);has.x0("_a_a",_nr);canBeA.x0("_a_a",listSubTypes);this._2_b.x0("_a_b",isA);this._2_b.x0("_a_b",has);this._2_b.x0("_a_b",canBeA);var rels=this._2_b.x0("_lb","relationType");this.types.relationType=relationType;this.types.isA=isA;this.types.has=has;this.types.canBeA=canBeA;this.types._aspt=_aspt;this.types.removeSuperType=removeSuperType;this.types._lspt=_lspt;this.types.listSubTypes=listSubTypes;this.types.referenceType=referenceType;this.types.property=property;this.types.component=component;this.types.system=system;this.types._a_r=_a_r;this.types._rr=_rr;this.types._g_r=_g_r;this.types._l_r=_l_r;this.types._u_r=_u_r;this.types._nr=_nr}},{key:"_1_n",value:function _1_n(){var _types2=this.types;var actionType=_types2.actionType;var behaviorType=_types2.behaviorType;var hasAlias=behaviorType.x0("new","hasAlias");var newAlias=actionType.x0("new","newAlias");var isAlias=actionType.x0("new","isAlias");newAlias.x0("_sc",function(param){var bootstrappEntity=B__1;var _2_s=bootstrappEntity._2_s;var _2_2=new C__0(param);_2_2.data=this.data;_2_2._id=this.id;_2_2._x0=_2_2.x0;_2_s.data.set(param,_2_2);_2_2.x0=function(action,param){for(var _len2=arguments.length,extraParams=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){extraParams[_key2-2]=arguments[_key2]}var result=this._x0.apply(this,[action,param].concat(extraParams));if(action=="getAliasName"&&param!="original"){return this.aliasName}else if(action=="setAliasName"){this.aliasName=param}else if(action=="getName"){var fullName=result||this._id;var aliasName=this.aliasName||this.id;if(aliasName){fullName+=" as "+aliasName}return fullName}return result};return _2_2});isAlias.x0("_sc",function(){return this._id!=null});this._2_b.x0("_a_b",hasAlias);hasAlias.x0("_a_a",newAlias);this.types.newAlias=newAlias;this.types.isAlias=isAlias;this.types.hasAlias=hasAlias}},{key:"_1_s",value:function _1_s(){var _types3=this.types;var coreType=_types3.coreType;var behaviorType=_types3.behaviorType;var actionType=_types3.actionType;var entityType=_types3.entityType;var referenceType=_types3.referenceType;var system=_types3.system;var listType=coreType.x0("new","listType");var template=this._2_b.x0("newAlias","template");var hasTemplate=behaviorType.x0("new","hasTemplate");listType.x0("_a_r",template,system);listType.x0("_a_b",hasTemplate);var _a_r=actionType.x0("new","_a_r");_a_r.x0("_sc",function(entity){var _2_s=B__1.getInstance();var templateEntity=this.x0("_g_r","template");_2_s.RQ0(_2_s._3_0.bind(entity)(templateEntity.id),"listType._a_r requires an Entity parameter of type: "+templateEntity.id+".")});hasTemplate.x0("_a_a",_a_r);this.types.listType=listType;this.types.template=template;this.types.hasTemplate=hasTemplate}},{key:"_2_g",value:function _2_g(actionParam,actionMethodParam,actionTopicParam){var _types4=this.types;var actionType=_types4.actionType;var component=_types4.component;var actionMethod=_types4.actionMethod;var actionTopic=_types4.actionTopic;actionParam.x0("_u_r",actionMethodParam.x0("_nr",component,false,actionType,actionMethod));actionParam.x0("_u_r",actionTopicParam.x0("_nr",component,false,actionType,actionTopic))}},{key:"_1_m",value:function _1_m(){var _types5=this.types;var entityType=_types5.entityType;var actionType=_types5.actionType;var component=_types5.component;var _a_b=_types5._a_b;var removeBehavior=_types5.removeBehavior;var _lb=_types5._lb;var _lab=_types5._lab;var _lbg=_types5._lbg;var _a_a=_types5._a_a;var removeAction=_types5.removeAction;var _la=_types5._la;var _laa=_types5._laa;var _aspt=_types5._aspt;var removeSuperType=_types5.removeSuperType;var _lspt=_types5._lspt;var listSubTypes=_types5.listSubTypes;var _nr=_types5._nr;var _a_r=_types5._a_r;var _g_r=_types5._g_r;var _l_r=_types5._l_r;var _u_r=_types5._u_r;var newAlias=_types5.newAlias;var isAlias=_types5.isAlias;var actionMethod=entityType.x0("new","actionMethod");var actionGetMethod=actionMethod.x0("new","actionGetMethod");var actionSetMethod=actionMethod.x0("new","actionSetMethod");var actionListMethod=actionMethod.x0("new","actionListMethod");var actionAddMethod=actionMethod.x0("new","actionAddMethod");var actionNewMethod=actionMethod.x0("new","actionNewMethod");var actionUpdateMethod=actionMethod.x0("new","actionUpdateMethod");var actionIsMethod=actionMethod.x0("new","actionIsMethod");var actionDeleteMethod=actionMethod.x0("new","actionDeleteMethod");var actionRemoveMethod=actionMethod.x0("new","actionRemoveMethod");var actionTopic=entityType.x0("new","actionTopic");var actionTopicAction=actionTopic.x0("new","actionTopicAction");var actionTopicBehavior=actionTopic.x0("new","actionTopicBehavior");var actionTopicEntity=actionTopic.x0("new","actionTopicEntity");actionType.x0("_a_r",actionMethod,component);actionType.x0("_a_r",actionTopic,component);this.types.actionMethod=actionMethod;this.types.actionTopic=actionTopic;var actionTopicAllActions=actionTopic.x0("new","actionTopicAllActions");var actionTopicBehaviorGroups=actionTopic.x0("new","actionTopicBehaviorGroups");var actionTopicAllBehaviorGroups=actionTopic.x0("new","actionTopicAllBehaviorGroups");var actionTopicAllBehavior=actionTopic.x0("new","actionTopicAllBehavior");var actionTopicSuperType=actionTopic.x0("new","actionTopicSuperType");var actionTopicSubTypes=actionTopic.x0("new","actionTopicSubTypes");var actionTopicAlias=actionTopic.x0("new","actionTopicAlias");var actionTopicReference=actionTopic.x0("new","actionTopicReference");this._2_g(_a_b,actionAddMethod,actionTopicBehavior);this._2_g(removeBehavior,actionRemoveMethod,actionTopicBehavior);this._2_g(_lb,actionListMethod,actionTopicBehavior);this._2_g(_lab,actionListMethod,actionTopicAllBehavior);this._2_g(_lbg,actionListMethod,actionTopicAllBehaviorGroups);this._2_g(_a_a,actionAddMethod,actionTopicAction);this._2_g(removeAction,actionRemoveMethod,actionTopicAction);this._2_g(_la,actionListMethod,actionTopicAction);this._2_g(_laa,actionListMethod,actionTopicAllActions);this._2_g(_aspt,actionAddMethod,actionTopicSuperType);this._2_g(removeSuperType,actionDeleteMethod,actionTopicSuperType);this._2_g(_lspt,actionListMethod,actionTopicAllActions);this._2_g(listSubTypes,actionListMethod,actionTopicSubTypes);this._2_g(_nr,actionNewMethod,actionTopicReference);this._2_g(_a_r,actionAddMethod,actionTopicReference);this._2_g(_g_r,actionGetMethod,actionTopicReference);this._2_g(_l_r,actionListMethod,actionTopicReference);this._2_g(_u_r,actionUpdateMethod,actionTopicReference);this._2_g(newAlias,actionNewMethod,actionTopicAlias);this._2_g(isAlias,actionIsMethod,actionTopicAlias);this.types.actionSetMethod=actionSetMethod;this.types.actionGetMethod=actionGetMethod;this.types.actionListMethod=actionListMethod;this.types.actionAddMethod=actionAddMethod;this.types.actionNewMethod=actionNewMethod;this.types.actionUpdateMethod=actionUpdateMethod;this.types.actionTopicAction=actionTopicAction;this.types.actionTopicBehavior=actionTopicBehavior;this.types.actionTopicEntity=actionTopicEntity;this.types.actionTopicSuperType=actionTopicSuperType;this.types.actionTopicSubTypes=actionTopicSubTypes;this.types.actionTopicAlias=actionTopicAlias;this.types.actionTopicReference=actionTopicReference}},{key:"_1_r",value:function _1_r(){var _types6=this.types;var coreType=_types6.coreType;var behaviorType=_types6.behaviorType;var actionType=_types6.actionType;var entityType=_types6.entityType;var hasBehaviors=_types6.hasBehaviors;var hasActions=_types6.hasActions;var isActionable=_types6.isActionable;var relationType=_types6.relationType;var isA=_types6.isA;var has=_types6.has;var canBeA=_types6.canBeA;var _a_b=_types6._a_b;var _lb=_types6._lb;var _sc=_types6._sc;var _g_c=_types6._g_c;var _lab=_types6._lab;var _a_a=_types6._a_a;var _la=_types6._la;var _laa=_types6._laa;var _lbg=_types6._lbg;var listAllBehaviorGroups=_types6.listAllBehaviorGroups;var _aspt=_types6._aspt;var removeSuperType=_types6.removeSuperType;var _lspt=_types6._lspt;var listSubTypes=_types6.listSubTypes;var _a_r=_types6._a_r;var _rr=_types6._rr;var _l_r=_types6._l_r;var _g_r=_types6._g_r;var _u_r=_types6._u_r;var _nr=_types6._nr;var referenceType=_types6.referenceType;var property=_types6.property;var component=_types6.component;var newEntity=_types6.newEntity;var removeAction=_types6.removeAction;var removeBehavior=_types6.removeBehavior;var hasAlias=_types6.hasAlias;var isAlias=_types6.isAlias;var newAlias=_types6.newAlias;var actionMethod=_types6.actionMethod;var actionSetMethod=_types6.actionSetMethod;var actionGetMethod=_types6.actionGetMethod;var actionListMethod=_types6.actionListMethod;var actionAddMethod=_types6.actionAddMethod;var actionNewMethod=_types6.actionNewMethod;var actionUpdateMethod=_types6.actionUpdateMethod;var actionTopic=_types6.actionTopic;var actionTopicAction=_types6.actionTopicAction;var actionTopicBehavior=_types6.actionTopicBehavior;var actionTopicEntity=_types6.actionTopicEntity;var actionTopicSuperType=_types6.actionTopicSuperType;var actionTopicSubTypes=_types6.actionTopicSubTypes;var actionTopicAlias=_types6.actionTopicAlias;var actionTopicReference=_types6.actionTopicReference;var isIdentifiable=behaviorType.x0("new","isIdentifiable");this._2_b.x0("_a_b",isIdentifiable);var setName=actionType.x0("new","setName");var getName=actionType.x0("new","getName");setName.x0("_sc",function(name){this.data.set("name",name)});getName.x0("_sc",function(){return this.data.get("name")});isIdentifiable.x0("_a_a",setName);isIdentifiable.x0("_a_a",getName);setName.x0("setName","Set the name");getName.x0("setName","Get the name");var actionTopicName=actionTopic.x0("new","actionTopicName");actionTopicName.x0("setName","Name");this._2_g(setName,actionSetMethod,actionTopicName);this._2_g(getName,actionGetMethod,actionTopicName);isIdentifiable.x0("setName","Is identifiable");this._2_b.x0("setName","System Root");coreType.x0("setName","Core Type");_sc.x0("setName","Set the code");_g_c.x0("setName","Get the code");behaviorType.x0("setName","Behavior Type");actionType.x0("setName","Action Type");entityType.x0("setName","Entity Type");hasBehaviors.x0("setName","Has Behaviors");hasActions.x0("setName","Has Actions");isActionable.x0("setName","Is Actionable");_a_a.x0("setName","Add Action");_la.x0("setName","List Actions");_laa.x0("setName","List All Actions");_a_b.x0("setName","Add Behavior");_lb.x0("setName","List Behaviors");_lab.x0("setName","List All Behaviors");newEntity.x0("setName","New entity");removeAction.x0("setName","Remove action");removeBehavior.x0("setName","Remove behavior");_aspt.x0("setName","Add parent type");removeSuperType.x0("setName","Delete parent type");_lspt.x0("setName","List parent types");listSubTypes.x0("setName","List sub-types");_a_r.x0("setName","Add reference");_rr.x0("setName","Remove reference");_g_r.x0("setName","Get reference");_l_r.x0("setName","List references");_u_r.x0("setName","Update reference");_nr.x0("setName","New reference");referenceType.x0("setName","Reference type");property.x0("setName","Property");component.x0("setName","Component");_lbg.x0("setName","List Behavior Groups");listAllBehaviorGroups.x0("setName","List All Behavior Groups");relationType.x0("setName","Relation Type");isA.x0("setName","Is a");has.x0("setName","Has");canBeA.x0("setName","Can be a");newAlias.x0("setName","New alias");isAlias.x0("setName","Is alias");hasAlias.x0("setName","Has alias");actionMethod.x0("setName","Method");actionSetMethod.x0("setName","Set");actionGetMethod.x0("setName","Get");actionListMethod.x0("setName","List");actionAddMethod.x0("setName","Add");actionNewMethod.x0("setName","New");actionUpdateMethod.x0("setName","Update");actionTopic.x0("setName","Topic");actionTopicAction.x0("setName","Action");actionTopicBehavior.x0("setName","Behavior");actionTopicEntity.x0("setName","Entity");actionTopicSuperType.x0("setName","Parent type");actionTopicSubTypes.x0("setName","Sub-type");actionTopicAlias.x0("setName","Alias");actionTopicReference.x0("setName","Reference");this.types.isIdentifiable=isIdentifiable}},{key:"_1_t",value:function _1_t(){var _types7=this.types;var coreType=_types7.coreType;var behaviorType=_types7.behaviorType;var actionType=_types7.actionType;var entityType=_types7.entityType;var listType=_types7.listType;var hasBehaviors=_types7.hasBehaviors;var hasActions=_types7.hasActions;var isActionable=_types7.isActionable;var _a_b=_types7._a_b;var _lb=_types7._lb;var _sc=_types7._sc;var _g_c=_types7._g_c;var _lab=_types7._lab;var _a_a=_types7._a_a;var _la=_types7._la;var _laa=_types7._laa;var actionNewMethod=_types7.actionNewMethod;var actionTopicEntity=_types7.actionTopicEntity;var userType=this._2_b.x0("new","userType");var entity=entityType.x0("new","entity");var behavior=behaviorType.x0("new","behavior");var action=actionType.x0("new","action");var list=listType.x0("new","list");entity.x0("_aspt",userType);behavior.x0("_aspt",userType);action.x0("_aspt",userType);list.x0("_aspt",userType);userType.x0("setName","User type");behavior.x0("setName","Behavior");action.x0("setName","Action");entity.x0("setName","Entity");var persistence=behaviorType.x0("new","persistence");var isPersistedLocally=persistence.x0("new","isPersistedLocally");var isPersistedRemotely=persistence.x0("new","isPersistedRemotely");entity.x0("_a_b",persistence);var newEntity=action.x0("new","new");var addEntity=action.x0("new","addEntity");var setEntity=action.x0("new","setEntity");var getEntity=action.x0("new","getEntity");var listSubTypes=action.x0("new","listSubTypes");var _lasbt=action.x0("new","_lasbt");var postExecute=action.x0("new","postExecute");var getInfo=action.x0("new","getInfo");var setInfo=action.x0("new","setInfo");newEntity.x0("_sc",function(param,_2_2){try{_2_2.x0("setInfo",{"createdOn":new Date().getTime()})}catch(e){}return _2_2});postExecute.x0("_sc",function(params){if(params!="setInfo"&&(params.startsWith("set")||params.startsWith("add"))){params.result.x0("setInfo",{"modifiedOn":new Date().getTime()})}return params.result});getInfo.x0("_sc",function(infoType){var info=this.data.get("info");if(infoType){return info[infoType]}else{return info}});setInfo.x0("_sc",function(param){var info=this.data.get("info");if(info==null){info={};this.data.set("info",info)}Object.assign(info,param)});this._2_g(newEntity,actionNewMethod,actionTopicEntity);persistence.x0("_a_a",newEntity);persistence.x0("_a_a",postExecute);persistence.x0("_a_a",getInfo);persistence.x0("_a_a",setInfo);persistence.x0("_a_a",listSubTypes);persistence.x0("setName","Is persistent");entity.x0("setName","Entity");behavior.x0("setName","Behavior");action.x0("setName","Action");list.x0("setName","List");this.types.userType=userType;this.types.entity=entity;this.types.behavior=behavior;this.types.action=action;this.types.list=list;this.types.persistence=persistence}},{key:"_1_x",value:function _1_x(){var _types8=this.types;var coreType=_types8.coreType;var behaviorType=_types8.behaviorType;var actionType=_types8.actionType;var entityType=_types8.entityType;var userType=_types8.userType;var behavior=_types8.behavior;var action=_types8.action;var entity=_types8.entity;var hasBehaviors=_types8.hasBehaviors;var hasActions=_types8.hasActions;var isActionable=_types8.isActionable;var isIdentifiable=_types8.isIdentifiable;var isA=_types8.isA;var has=_types8.has;var canBeA=_types8.canBeA;var persistence=_types8.persistence;var hasTemplate=_types8.hasTemplate;var hasAlias=_types8.hasAlias;var _sc=_types8._sc;var _g_c=_types8._g_c;var logs=_types8.logs;var isSerializable=behavior.x0("new","isSerializable");var _g_j=action.x0("new","_g_j");var _sj=action.x0("new","_sj");_g_j.x0("_sc");_sj.x0("_sc");isSerializable.x0("_a_a",_g_j);isSerializable.x0("_a_a",_sj);isSerializable.x0("_a_a",_sc);isSerializable.x0("_a_a",_g_c);isSerializable.x0("setName","Is serializable");_g_j.x0("setName","Marshall");_sj.x0("setName","Unmarshall");this._2_b.x0("_a_b",isSerializable);if(logs){logs.x0("_sc",function(json){return null})}isSerializable.x0("_sc",function(json){return null});hasTemplate.x0("_sc",function(json){return null});hasAlias.x0("_sc",function(json){return null});hasTemplate.x0("_sc",function(json){return null});hasBehaviors.x0("_sc",function(json){if(json){var behaviors=this.x0("_lb");for(var k in json.behaviors){var bData=json.behaviors[k];if(behaviors==null||behaviors.has==null||!behaviors.has(bData)){var _behavior=this.x0("get",bData);this.x0("_a_b",_behavior)}}}else{var _behaviors=this.x0("_lb");if(_behaviors){return{id:"hasBehaviors",behaviors:_behaviors.toJSON()}}return null}});hasActions.x0("_sc",function(json){if(json){var actions=this.x0("_la");for(var k in json.actions){var aData=json.actions[k];if(actions==null||actions.has==null||!actions.has(aData)){var _action=this.x0("get",aData);this.x0("_a_a",_action)}}}else{var _actions=this.x0("_la");if(_actions){return{id:"hasActions",actions:_actions.toJSON()}}return null}});isActionable.x0("_sc",function(json){if(json){if(json.code){this.x0("_sc",json.code)}if(json.topic){}if(json.method){}}else{var result=void 0;var setResult=function setResult(result,entryName,entryValue){if(entryValue){result=result||{id:"isActionable"};result[entryName]=entryValue}return result};var code=this.x0("_g_c");result=setResult(result,"code",code);return result}});has.x0("_sc",function(json){if(json){}else{}});canBeA.x0("_sc",function(json){if(json){}else{}});isA.x0("_sc",function(json){var _this=this;if(json){var entityParentFound=false;var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=json.parents[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var parentId=_step8.value;if(parentId=="entity"){entityParentFound=true}var parent=this.x0("get",parentId);this.x0("_aspt",parent)}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return()}}finally{if(_didIteratorError8){throw _iteratorError8}}}if(!entityParentFound){this.x0("removeSuperType","entity")}}else{var _ret6=function(){var result=void 0;var setResult=function setResult(result,entryName,entryValue){if(entryValue){result=result||{id:"isA"};result[entryName]=entryValue}return result};var _2_p=_this.x0("_lspt");var superTypeList=[];_2_p.forEach(function(value,key){superTypeList.push(value.id)});result=setResult(result,"parents",superTypeList);return{v:result}}();if((typeof _ret6==="undefined"?"undefined":_typeof(_ret6))==="object")return _ret6.v}});persistence.x0("_sc",function(json){if(json){var info=this.x0("getInfo");info=info?Object.assign(info,json.info):json.info}else{var result=void 0;var setResult=function setResult(result,entryName,entryValue){if(entryValue){result=result||{id:"persistence"};result[entryName]=entryValue}return result};var _info=this.x0("getInfo");result=setResult(result,"info",_info);return result}});isIdentifiable.x0("_sc",function(json){if(json){this.x0("setName",json.name)}else{var result=void 0;var setResult=function setResult(result,entryName,entryValue){if(entryValue){result=result||{id:"isIdentifiable"};result[entryName]=entryValue}return result};var name=this.x0("getName");result=setResult(result,"name",name);return result}});this.types.isSerializable=isSerializable}},{key:"createPresenter",value:function createPresenter(id,presenter,urlString){var _types9=this.types;var component=_types9.component;var url=_types9.url;var newPresenter=presenter.x0("new",id);var newUrl=url.x0("new",urlString);var newPresenterUrlUpdate=new B__4(newUrl,component,false,presenter,url);newPresenter.x0("_u_r",newPresenterUrlUpdate);return newPresenter}},{key:"overwritePresenter",value:function overwritePresenter(id,urlString,theEntity,_0_7,_0_8,thePresenter){var overwrite=arguments.length<=6||arguments[6]===undefined?true:arguments[6];var _types10=this.types;var component=_types10.component;var system=_types10.system;var newPresenterList=_0_8.x0("new","list<"+id+">");var newPresenterListUpdate=newPresenterList.x0("_nr",component,false,_0_7,_0_8);theEntity.x0("_u_r",newPresenterListUpdate);var newPresenter=this.createPresenter(id,thePresenter,urlString);if(overwrite){var newPresenterUpdate=newPresenter.x0("_nr",component,false,_0_8,thePresenter);newPresenterList.x0("_u_r",newPresenterUpdate)}else{var _newPresenterUpdate=newPresenter.x0("_nr",component);newPresenterList.x0("_a_r",_newPresenterUpdate)}this.types[id]=newPresenter;this.types["list<"+id+">"]=newPresenterList;return newPresenter}},{key:"_1_u",value:function _1_u(){var _types11=this.types;var coreType=_types11.coreType;var behaviorType=_types11.behaviorType;var actionType=_types11.actionType;var entityType=_types11.entityType;var relationType=_types11.relationType;var referenceType=_types11.referenceType;var listType=_types11.listType;var hasBehaviors=_types11.hasBehaviors;var isA=_types11.isA;var has=_types11.has;var canBeA=_types11.canBeA;var isIdentifiable=_types11.isIdentifiable;var isSerializable=_types11.isSerializable;var hasActions=_types11.hasActions;var persistence=_types11.persistence;var canSearch=_types11.canSearch;var behavior=_types11.behavior;var component=_types11.component;var template=_types11.template;var system=_types11.system;var presenterType=coreType.x0("new","presenter");var url=entityType.x0("new","url");presenterType.x0("_a_r",url,component);presenterType.x0("setName","Presenter Type");url.x0("setName","URL");listType.x0("setName","List Type");var presentersType=listType.x0("new","list<presenter>");var presenterUpdate=presenterType.x0("_nr",system,false,listType,template);presentersType.x0("_u_r",presenterUpdate);presentersType.x0("setName","Presenters type");var uiBasePresenters=presentersType.x0("new","rootList<presenter>");uiBasePresenters.x0("setName","UI Base Presenters");this._2_b.x0("_a_r",uiBasePresenters,system);this.types.url=url;this.types.presenterType=presenterType;this.types.presenters=uiBasePresenters;var entityPresenter=this.createPresenter("entityPresenter",presenterType,"/ui/build/components/entities/entityPanel.js");var newPresenterUpdate=entityPresenter.x0("_nr",component);uiBasePresenters.x0("_a_r",newPresenterUpdate);entityPresenter.x0("setName","Entity presenter");this.types.entityPresenter=entityPresenter;var inlineListPresenter=this.overwritePresenter("inlineListPresenter","/ui/build/components/entities/inlineListPanel.js",listType,this._2_b,uiBasePresenters,presenterType,false);inlineListPresenter.x0("setName","Inline list presenter");var inlineListPresenters=this.types["list<inlineListPresenter>"];inlineListPresenters.x0("setName","Inline list presenters");var behaviorPresenter=this.overwritePresenter("behaviorPresenter","/ui/build/components/entities/entityPanel.js",behaviorType,this._2_b,uiBasePresenters,presenterType,false);behaviorPresenter.x0("setName","Behavior presenter");var behaviorPresenters=this.types["list<behaviorPresenter>"];behaviorPresenters.x0("setName","Behavior presenters");var hasBehaviorsPresenter=this.overwritePresenter("hasBehaviorsPresenter","/ui/build/components/behaviors/hasBehaviorsPanel.js",hasBehaviors,behaviorType,behaviorPresenters,behaviorPresenter);hasBehaviorsPresenter.x0("setName","'has behaviors' presenter");var isAPresenter=this.overwritePresenter("isAPresenter","/ui/build/components/relations/isA.js",isA,behaviorType,behaviorPresenters,behaviorPresenter);isAPresenter.x0("setName","'is a' presenter");var hasPresenter=this.overwritePresenter("hasPresenter","/ui/build/components/relations/has.js",has,behaviorType,behaviorPresenters,behaviorPresenter);hasPresenter.x0("setName","'has presenter' presenter");var canBeAPresenter=this.overwritePresenter("canBeAPresenter","/ui/build/components/relations/canBeA.js",canBeA,behaviorType,behaviorPresenters,behaviorPresenter);canBeAPresenter.x0("setName","'can be a' presenter");var isIdentifiablePresenter=this.overwritePresenter("isIdentifiablePresenter","/ui/build/components/behaviors/isIdentifiablePanel.js",isIdentifiable,behaviorType,behaviorPresenters,behaviorPresenter);isIdentifiablePresenter.x0("setName","'is identifiable' presenter");var isSerializablePresenter=this.overwritePresenter("isSerializablePresenter","/ui/build/components/behaviors/isSerializablePanel.js",isSerializable,behaviorType,behaviorPresenters,behaviorPresenter);isSerializablePresenter.x0("setName","'is serializable' presenter");var hasPresentersPresenter=presenterType.x0("new","hasPresentersPresenter");hasPresentersPresenter.x0("setName","'has presenters' presenter");var hasActionsPresenter=this.overwritePresenter("hasActionsPresenter","/ui/build/components/behaviors/hasActionsPanel.js",hasActions,behaviorType,behaviorPresenters,behaviorPresenter);hasActionsPresenter.x0("setName","'has actions' presenter");var persistencePresenter=presenterType.x0("new","persistencePresenter");persistencePresenter.x0("setName","'persistence' presenter");var entityTypeRefs=entityType.x0("_l_r")}},{key:"_1_q",value:function _1_q(){var _types12=this.types;var behavior=_types12.behavior;var action=_types12.action;var entity=_types12.entity;var behaviorType=_types12.behaviorType;var behaviorPresenter=_types12.behaviorPresenter;var finder=entity.x0("new","finder");var canSearch=behavior.x0("new","canSearch");var applyFilter=action.x0("new","applyFilter");var applySort=action.x0("new","applySort");var setFilter=action.x0("new","setFilter");var getFilter=action.x0("new","getFilter");var setSort=action.x0("new","setSort");var getSort=action.x0("new","getSort");var setFilterLogic=action.x0("new","setFilterLogic");var getFilterLogic=action.x0("new","getFilterLogic");var setSortLogic=action.x0("new","setSortLogic");var getSortLogic=action.x0("new","getSortLogic");applyFilter.x0("_sc",function(instance){var filterLogic=this.data.get("filterLogic");return filterLogic.bind(this)(instance)});applySort.x0("_sc",function(instance){var sortLogic=this.data.get("sortLogic");sortLogic.bind(this)(instance)});setFilter.x0("_sc",function(filter){this.data.set("filter",filter)});getFilter.x0("_sc",function(){return this.data.get("filter")});setSort.x0("_sc",function(sort){this.data.set("sort",sort)});getSort.x0("_sc",function(){return this.data.get("sort")});setFilterLogic.x0("_sc",function(filterLogic){this.data.set("filterLogic",filterLogic)});getFilterLogic.x0("_sc",function(){return this.data.get("filterLogic")});setSortLogic.x0("_sc",function(sortLogic){this.data.set("sortLogic",sortLogic)});getSortLogic.x0("_sc",function(){return this.data.get("sortLogic")});canSearch.x0("_sc",function(json){if(json){this.x0("setFilter",json.filter);this.x0("setSort",json.sort);var _setFilterLogic=void 0,_setSortLogic=void 0;eval("setFilterLogic="+json.filterLogic);eval("setSortLogic="+json.filterLogic);this.x0("setFilterLogic",_setFilterLogic);this.x0("setSortLogic",_setSortLogic)}else{var result=void 0;var setResult=function setResult(result,entryName,entryValue){if(entryValue){result=result||{id:"canSearch"};result[entryName]=entryValue}return result};var filter=this.x0("getFilter");var sort=this.x0("getSort");var filterLogic=this.x0("getFilterLogic");var sortLogic=this.x0("getSortLogic");result=setResult(result,"filter",filter);result=setResult(result,"sort",sort);result=setResult(result,"filterLogic",filterLogic?utils.escapeFunctionCode(filterLogic):null);result=setResult(result,"sortLogic",sortLogic?utils.escapeFunctionCode(sortLogic):null);return result}});finder.x0("_a_b",canSearch);finder.x0("setName","Finder");canSearch.x0("_a_a",applyFilter);canSearch.x0("_a_a",applySort);canSearch.x0("_a_a",setFilter);canSearch.x0("_a_a",getFilter);canSearch.x0("_a_a",setSort);canSearch.x0("_a_a",getSort);canSearch.x0("_a_a",setFilterLogic);canSearch.x0("_a_a",getFilterLogic);canSearch.x0("_a_a",setSortLogic);canSearch.x0("_a_a",getSortLogic);canSearch.x0("setName","Can search");var behaviorPresenters=this.types["list<behaviorPresenter>"];var canSearchPresenter=this.overwritePresenter("canSearchPresenter","/ui/build/components/behaviors/canSearchPanel.js",canSearch,behaviorType,behaviorPresenters,behaviorPresenter);canSearchPresenter.x0("setName","'Can search' presenter");var newFinder=finder.x0("new","newFinder");newFinder.x0("setName","New Finder");var hasFacets=behavior.x0("new","hasFacets");var listFacets=action.x0("new","listFacets");var clearFacets=action.x0("new","clearFacets");hasFacets.x0("setName","Has _0_u");listFacets.x0("setName","List _0_u");clearFacets.x0("setName","Clear _0_u");listFacets.x0("_sc",function(){return this.data.get("_0_u")});clearFacets.x0("_sc",function(){this.data.set("_0_u",null)});hasFacets.x0("_sc",function(json){if(json){}else{}});hasFacets.x0("_a_a",listFacets);hasFacets.x0("_a_a",clearFacets);newFinder.x0("_a_b",hasFacets);newFinder.x0("setFilterLogic",function(instance){var _0_x=true;var criteria=this.x0("getFilter");if(criteria.term&&criteria.term!="*"){var name=instance.x0("getName");if(name==null){name=instance.id}_0_x=name&&name.toUpperCase().includes(criteria.term.toUpperCase())}if(_0_x){var _0_u=this.data.get("_0_u");if(_0_u==null){_0_u=new B__3;this.data.set("_0_u",_0_u)}var _2_b=instance.x0("_gbt");var _2_bName=_2_b.x0("getName");_0_u.set(_2_b.id,_2_bName);if(criteria.parent&&criteria.parent!="*"){_0_x=_0_x&&_2_b&&_2_b.id==criteria.parent}}return _0_x?instance:null});newFinder.x0("setSortLogic",function(instance){return null});this.types.hasFacets=hasFacets;this.types.canSearch=canSearch;this.types.newFinder=newFinder}},{key:"_1_o",value:function _1_o(){var _types13=this.types;var behaviorType=_types13.behaviorType;var actionType=_types13.actionType;var entityType=_types13.entityType;var entity=_types13.entity;var logs=behaviorType.x0("new","logs");this._2_b.x0("_a_b",logs);this.types.logs=logs;var preExecute=actionType.x0("new","preExecute");preExecute.x0("_sc",function(params){var msg=this.id+".x0 "+params.action;if(params.param){msg+=" "+(params.param.id?params.param.id:params.param)}console.log(msg);return true});var postExecute=actionType.x0("new","postExecute");postExecute.x0("_sc",function(params){var msg=this.id+".x0 "+params.action;if(params.result){console.log(msg+" returned:");console.log(params.result)}return params.result});var errorExecute=actionType.x0("new","errorExecute");errorExecute.x0("_sc",function(params){var msg=this.id+".x0 "+params.action;if(params.param){msg+=" "+(params.param.id?params.param.id:params.param)}msg+=" failed with: "+params.error;console.error(msg);return true});logs.x0("_a_a",preExecute);logs.x0("_a_a",postExecute);logs.x0("_a_a",errorExecute)}},{key:"_2_6",value:function _2_6(){var _types14=this.types;var entityType=_types14.entityType;var entity=_types14.entity;var component=_types14.component;var system=_types14.system;var template=_types14.template;var list=_types14.list;var memberType1=entity.x0("new","memberType1");memberType1.x0("setName","Member Type 1");var memberType2=entity.x0("new","memberType2");memberType2.x0("setName","Member Type 2 ( testing long names for components as well)");var longName=entity.x0("new","longName");longName.x0("setName","Characterizations of multidimensionality in internationalization for counterrevolutionaries (to test extra long names)");longName.x0("_a_r",memberType1,component);longName.x0("_a_r",memberType2,component);var subLongName=longName.x0("new","testChildOflongName");var test1=entity.x0("new","test1");subLongName.x0("_a_r",test1,component);var subSubLongName=subLongName.x0("new","testGrandChildOflongName");var list1=subLongName.x0("_l_r");var list2=subLongName.x0("_l_r",component);var list3=subSubLongName.x0("_l_r");var member1=memberType1.x0("new","member1");member1.x0("setName","Member 1");var memeber1Update=member1.x0("_nr",component,false,longName,memberType1);subLongName.x0("_u_r",memeber1Update);var list11=subLongName.x0("_l_r");var list21=subLongName.x0("_l_r",component);var list31=subSubLongName.x0("_l_r");var color=entity.x0("new","color");var red=color.x0("new","red");var blue=color.x0("new","blue");var colorList=list.x0("new","list<color>");var colorListTest=colorList.x0("_l_r");var colorUpdate=color.x0("_nr",system,false,list,template);colorList.x0("_u_r",colorUpdate);var colorList2=colorList.x0("new","colorList2");colorList2.x0("_a_r",red,component);colorList2.x0("_a_r",blue,component);var colorListTest2=colorList2.x0("_l_r");longName.x0("_a_r",colorList,component);var colorList2Update=colorList2.x0("_nr",component,false,longName,colorList);subLongName.x0("_u_r",colorList2Update);var colorList2Alias=colorList2.x0("newAlias","colorList2Alias");var colorListTest3=colorList2Alias.x0("_l_r");var colorListTestName=colorList2Alias.x0("getName");colorList2Alias.x0("setName","Color list 2");var colorListTestName2=colorList2Alias.x0("getName")}},{key:"test",value:function test(){var _types15=this.types;var coreType=_types15.coreType;var behaviorType=_types15.behaviorType;var actionType=_types15.actionType;var entityType=_types15.entityType;var behavior=_types15.behavior;var action=_types15.action;var entity=_types15.entity;var hasBehaviors=_types15.hasBehaviors;var hasActions=_types15.hasActions;var isActionable=_types15.isActionable;var isIdentifiable=_types15.isIdentifiable;var isA=_types15.isA;var has=_types15.has;var canBeA=_types15.canBeA;var canSearch=_types15.canSearch;var persistence=_types15.persistence;var _sc=_types15._sc;var _g_c=_types15._g_c;var logs=_types15.logs;var _la=_types15._la;var newFinder=_types15.newFinder;var a1=coreType.x0("_laa");var a2=behaviorType.x0("_laa");var a3=actionType.x0("_laa");var a4=entityType.x0("_laa");var a5=hasBehaviors.x0("_laa");var a6=hasActions.x0("_laa");var a7=isActionable.x0("_laa");var a8=_la.x0("_laa");var b1=coreType.x0("_lab");var b2=behaviorType.x0("_lab");var b3=actionType.x0("_lab");var b4=entityType.x0("_lab");var b5=hasBehaviors.x0("_lab");var b6=hasActions.x0("_lab");var b7=isActionable.x0("_lab");var b8=_la.x0("_lab");var newFinderJson=newFinder.x0("_g_j");var newFinderParsed=JSON.parse(newFinderJson);var rebuiltNewFinder=entity.x0("_sj",newFinderParsed);var actionJson=action.x0("_g_j");var newAction=JSON.parse(actionJson);var rebuiltAction=entity.x0("_sj",newAction);var jsonStr1="{\"id\":\"newFinderTwo\",\"behaviors\":[{\"id\":\"isA\",\"parents\":[\"finder\"]},{\"id\":\"isIdentifiable\",\"name\":\"New Finder\"},{\"id\":\"persistence\",\"info\":{\"createdOn\":1477521939093,\"location\":\"local\"}},{\"id\":\"canSearch\",\"filter\":{\"term\":\"Behavior\",\"parent\":\"actionType\"},\"sort\":{\"field\":\"name\"},\"filterLogic\":\"function (instance) {\\n                var _0_x = true;\\n                var criteria = this.x0(\\\"getFilter\\\");\\n                if (criteria.term) {\\n                    var name = instance.x0(\\\"getName\\\");\\n                    _0_x = _0_x && name && name.includes(criteria.term);\\n                }\\n                if (criteria.parent) {\\n                    var parents = instance.x0(\\\"_lspt\\\");\\n                    _0_x = _0_x && parents && parents.has(criteria.parent);\\n                }\\n                return _0_x;\\n            }\",\"sortLogic\":\"function (instance) {\\n                return null;\\n            }\"}]}";var json1=JSON.parse(jsonStr1);newFinder.x0("setFilter",{term:"Behavior",parent:"actionType"});newFinder.x0("setSort",{field:"name"});var test=this._2_b.x0("_lasbt",newFinder)}},{key:"root",get:function get(){return this._2_b}}]);return B__0}();exports.B__0=B__0;var C__0=function(){function C__0(){var id=arguments.length<=0||arguments[0]===undefined?".root":arguments[0];_classCallCheck(this,C__0);this.id=id;this.data=new Map;var bootstrappEntity=B__1.getInstance();bootstrappEntity.data.set(id,this)}_createClass(C__0,[{key:"x0",value:function x0(action,param){var bootstrappEntity=B__1.getInstance();for(var _len3=arguments.length,extraParams=Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++){extraParams[_key3-2]=arguments[_key3]}var params=extraParams&&extraParams.length?extraParams:null;return bootstrappEntity.x0.bind(this)(action,param,params)}}]);return C__0}();var utils=function(){function utils(){_classCallCheck(this,utils)}_createClass(utils,null,[{key:"capitalize",value:function capitalize(str){return str.replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase()})}},{key:"escapeFunctionCode",value:function escapeFunctionCode(fn){var source=fn.toString();source=source.replace(/\\\n/g,"\\\n").replace(/\\'/g,"\\'").replace(/\\"/g,"\\\"").replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f");return source.replace(/[\u0000-\u0019]+/g,"")}}]);return utils}();
