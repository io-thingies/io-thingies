"use strict";Object.defineProperty(exports,"__esModule",{value:true});var inlineListPanel=React.createClass({displayName:"inlineListPanel",getInitialState:function getInitialState(){return{entitiesState:{},m_ss8:false,selectorType:null}},fn0:function fn0(entity){return entity.x0("getName")||React.createElement("i",null,"< ",entity.id," > ")},h_pn:function h_pn(parent){var url="/entities/get/"+parent.id;this.props.router.push(url)},handleDetails:function handleDetails(entity){var entitiesState=this.state.entitiesState;if(entitiesState[entity.id]){delete entitiesState[entity.id]}else{entitiesState[entity.id]=true}this.setState({entitiesState:entitiesState})},m_srs2:function m_srs2(){this.m_ss8("t_rf",this.t_rfSelected)},t_rfSelected:function t_rfSelected(param){var selectorType=window._0_g.root;var templateRef=this.props.data.entity.x0("_g_r","template");if(templateRef){selectorType=templateRef}var selectorFn=this.m_rs7;this.setState({m_ss8:true,selectorType:selectorType,selectorFn:selectorFn,param:param})},_0_j:function _0_j(parent,entity){var entityName=entity;var id=entityName.replace(/\s/g,"");entity=parent.x0("new",id);entity.x0("setName",entityName);return entity},m_rs7:function m_rs7(entity,newType){if(newType){entity=this._0_j(this.state.selectorType,entity)}this.props.data.entity.x0("addReference",entity,this.state.param);return true},m_ss8:function m_ss8(type,selectorFn){var root=window._0_g.root;var selectorType=type?root.x0("get",type):root;this.setState({m_ss8:true,selectorType:selectorType,selectorFn:selectorFn})},m_cs2:function m_cs2(){this.setState({m_ss8:false})},_0_k:function _0_k(id){this.props.data.entity.x0("_rr",id);var m_ss8=this.state.m_ss8;this.setState({m_ss8:m_ss8})},m_sus1:function m_sus1(value){var selectorType=value._0_8;var param=void 0;if(selectorType==null){selectorType=value}else{param=value}var selectorFn=this.m_urs2;this.setState({m_ss8:true,selectorType:selectorType,selectorFn:selectorFn,param:param})},m_urs2:function m_urs2(entity,newType){if(newType){entity=this._0_j(this.state.selectorType,entity)}var _0_8=this.state.selectorType;if(this.state.param){this.props.data.entity.x0("_rr",this.state.param.id)}var typeRef=_0_8.tag;var _0_7=_0_8._0_7;var entityUpdate=entity.x0("_nr",typeRef,false,_0_7,_0_8);this.props.data.entity.x0("_ur",entityUpdate);return true},render:function render(){var _this=this;var _l_r=this.props.data.entity.x0("_l_r");var hasNodes=[];if(_l_r&&_l_r.size){(function(){var self=_this;_l_r.forEach(function(entity,key){var entityLabel="loading ..";var icon="fa fa-circle-o-notch fa-fw fa-spin";var entityAction=null;var extraInfo=null;var tag=null;if(entity){var entityName=self.fn0(entity);if(entityName){entityLabel=entityName;tag=self.fn0(entity.tag);icon="fa fa-fw";if(entity.inherited){icon="fa fa-chevron-circle-down";entityAction=self.props.readOnly==false?React.createElement("div",null,React.createElement("button",{className:"c_ab"},React.createElement("i",{className:"fa fa-edit fa-fw blue"})," Select")):null;var _0_7Name=self.fn0(entity._0_7);extraInfo=React.createElement("div",null,"Inherited from: ",React.createElement("strong",null,_0_7Name))}else{entityAction=self.props.readOnly==false?React.createElement("div",null,React.createElement("button",{className:"c_ab",onClick:self._0_k.bind(self,entity.id)},React.createElement("i",{className:"fa fa-remove fa-fw red"})," Remove"),React.createElement("button",{className:"c_ab",onClick:self.m_sus1.bind(self,entity)},React.createElement("i",{className:"fa fa-edit fa-fw blue"})," Select")):null;if(entity._0_8){icon="fa fa-dot-circle-o";var _0_8Name=self.fn0(entity._0_8);var __0_7Name=self.fn0(entity._0_7);extraInfo=React.createElement("div",null,"Overwrites: ",React.createElement("strong",null,_0_8Name),"  from ",React.createElement("strong",null,__0_7Name))}else{icon="fa fa-circle-o"}}}else{entityLabel="Error loading entity.";icon="fa fa-exclamation fa-fw fa-red";entityAction=React.createElement("button",{className:"report-rel"},React.createElement("i",{className:"fa fa-send fa-fw red"})," Report")}var details=self.props.data.details;var rowFooterVisible=details&&details=="show"||self.state.entitiesState[entity.id]?"show":"hide";hasNodes.push(React.createElement("div",{className:"row",key:key},React.createElement("span",{className:"rel-ref-name"},React.createElement("i",{className:icon,onClick:self.handleDetails.bind(self,entity)},"  "),entityLabel),React.createElement("span",{className:"details right"},entityAction),React.createElement("div",{className:"c_rf "+rowFooterVisible},"Path: ",React.createElement(EntityPath,{data:entity,onClick:self.h_pn}),React.createElement("div",null,"Tag: ",tag),extraInfo)))}})})()}return React.createElement("div",{className:"c_ipc"},React.createElement("div",{className:"c_rl rel-rows"},React.createElement("div",{className:"rows"},hasNodes)),this.props.readOnly==false?React.createElement("div",{className:"add-newc_c2"},React.createElement("button",{className:"c_ab",onClick:this.m_srs2},React.createElement("i",{className:"fa fa-plus blue"})," Add to List")):null,React.createElement(Ts_0,{visible:this.state.m_ss8,onClose:this.m_cs2,onSelect:this.state.selectorFn,type:this.state.selectorType}))}});exports.default=inlineListPanel;
