"use strict";Object.defineProperty(exports,"__esModule",{value:true});var isAPanel=React.createClass({displayName:"isAPanel",getInitialState:function getInitialState(){return{showSelector:false,selectorType:null}},formatName:function formatName(entity){return entity.execute("getName")||React.createElement("i",null,"< ",entity.id," >")},handlePageNavigation:function handlePageNavigation(parent){var url="/entities/get/"+parent.id;this.props.router.push(url)},showTypeSelector:function showTypeSelector(type){var root=window.builtInBlocks.root;var selectorType=root;var selectorFn=this.typeSelected;this.setState({showSelector:true,selectorType:selectorType,selectorFn:selectorFn})},createNew:function createNew(parent,entity){var entityName=entity;var id=entityName.replace(/\s/g,"");entity=parent.execute("new",id);entity.execute("setName",entityName);return entity},typeSelected:function typeSelected(entity,newType){if(newType){entity=this.createNew(this.state.selectorType,entity)}this.props.data.entity.execute("addSuperType",entity,this.state.param);return true},closeSelector:function closeSelector(){this.setState({showSelector:false})},deleteReference:function deleteReference(id){this.props.data.entity.execute("removeSuperType",id);var showSelector=this.state.showSelector;this.setState({showSelector:showSelector})},render:function render(){var _this=this;var listTypes=this.props.data.entity.execute("listSuperTypes");var isANodes=[];if(listTypes){(function(){var self=_this;listTypes.forEach(function(entity,key){var entityLabel="loading ..";var icon="fa fa-circle-o-notch fa-fw fa-spin";var ok=false;if(entity){var entityName=self.formatName(entity);if(entityName){entityLabel=entityName;icon="fa fa-fw";ok=true}else{entityLabel="Error loading entity.";icon="fa fa-exclamation fa-fw fa-red"}isANodes.push(React.createElement("div",{className:"row",key:key},React.createElement("span",{className:"rel-ref-name"},React.createElement("i",{className:icon},"Â  "),entityLabel),React.createElement("span",{className:"details"},ok?React.createElement("button",{className:"action-button",onClick:self.deleteReference.bind(self,entity.id)},React.createElement("i",{className:"fa fa-remove fa-fw red"})," Remove"):React.createElement("button",{className:"report-rel"},React.createElement("i",{className:"fa fa-send fa-fw red"})," Report")),React.createElement("div",{className:"row-footer"},"Path: ",React.createElement(EntityPath,{data:entity,onClick:self.handlePageNavigation}))))}})})()}return React.createElement("div",{className:"relation-panel-content"},React.createElement("div",{className:"rel-title"},"This entity is a: "),React.createElement("div",{className:"row-list rel-rows"},React.createElement("div",{className:"rows"},isANodes)),React.createElement("div",{className:"add-new-container"},React.createElement("button",{className:"add-rel",onClick:this.showTypeSelector},React.createElement("i",{className:"fa fa-plus blue"})," Add")),React.createElement(TypeSelector,{visible:this.state.showSelector,onClose:this.closeSelector,onSelect:this.state.selectorFn,type:this.state.selectorType}))}});exports.default=isAPanel;