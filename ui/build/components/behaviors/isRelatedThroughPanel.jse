"use strict";Object.defineProperty(exports,"__esModule",{value:true});var RelationsPanel=React.createClass({displayName:"RelationsPanel",getInitialState:function getInitialState(){return{editMode:this.props.edit}},componentWillMount:function componentWillMount(){var relations=this.props.data.entity.execute("listRelations");var self=this;var relEntityIds=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=relations.list[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var r=_step.value;relEntityIds.push(r.id)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}ServiceApi.getEntities(relEntityIds,function(relEntityList){var comps={};var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=relEntityList[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var relEntity=_step2.value;comps[relEntity.id]=relEntity;var urls=relEntity.execute("listPresenters");comps[relEntity.id]["url"]=urls.default}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}ServiceApi.getComponents(comps,function(rList){self.setState({"rels":rList})})})},handleSettings:function handleSettings(){var listItems=[];for(var i in this.state.rels){var b=this.state.rels[i];var name=b.execute("getName");listItems.push(React.createElement("li",{className:"item",key:b.id},name))}return React.createElement(ListManager,{title:"Relations",name:"relation"},listItems)},handleEdit:function handleEdit(edit){this.setState({"editMode":edit})},handleBehaviorTabChange:function handleBehaviorTabChange(newTab,index){this.setState({"activeRelTab":index})},render:function render(){var tabPanels=[];if(this.state.rels){var activeRelTab=this.state.activeRelTab;for(var c in this.state.rels){var b=this.state.rels[c];if(!activeRelTab){activeRelTab=0}var entityName=b.execute("getName");b.component.props={"label":entityName,"key":b.id,"tabsOnly":false,"data":this.props.entity.data,"edit":this.state.editMode,"entity":this.props.entity};tabPanels.push(b.component)}};return React.createElement("div",{className:"relation-behavior-panel-content"},React.createElement(Tabs,{name:"std-tabs",label:"Relation",onTabChange:this.handleBehaviorTabChange,getSettings:this.state.editMode?this.handleSettings:undefined},tabPanels))}});exports.default=RelationsPanel;