"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var hasActionsPanel=React.createClass({displayName:"hasActionsPanel",getInitialState:function getInitialState(){return{showSelector:false,selectorType:null}},formatName:function formatName(entity){return entity.execute("getName")||React.createElement("i",null,"< ",entity.id," >")},showActionSelector:function showActionSelector(type){var root=window.builtInBlocks.root;var selectorType=type?root.execute("get","actionType"):root;var selectorFn=this.actionSelected;this.setState({showSelector:true,selectorType:selectorType,selectorFn:selectorFn})},createNew:function createNew(parent,entity){var entityName=entity;var id=entityName.replace(/\s/g,"");entity=parent.execute("new",id);entity.execute("setName",entityName);return entity},actionSelected:function actionSelected(entity,newType){if(newType){entity=this.createNew(this.state.selectorType,entity)}this.props.data.entity.execute("addAction",entity,this.state.param);return true},closeSelector:function closeSelector(){this.setState({showSelector:false})},deleteAction:function deleteAction(id){this.props.data.entity.execute("removeAction",id);var showSelector=this.state.showSelector;this.setState({showSelector:showSelector})},render:function render(){var _this=this;var behavior=this.props.data.entity;var behaviorName=this.formatName(behavior);var behaviorActions=behavior.execute("listActions");if(behaviorActions){var _ret=function(){var actions=[];var self=_this;behaviorActions.forEach(function(action,actionId){var actionName=self.formatName(action);actions.push(React.createElement("div",{className:"row",key:actionId},React.createElement("span",{className:"rel-ref-name"},actionName),React.createElement("span",{className:"details"},React.createElement("button",{className:"action-button",onClick:self.deleteAction.bind(self,action.id)},React.createElement("i",{className:"fa fa-remove fa-fw red"})," Remove"))))});return{v:React.createElement("div",{className:"behavior-panel-content"},React.createElement("div",{className:"rel-title"},"Actions for behavior ",React.createElement("strong",null,"'",behaviorName,"'"),":"),React.createElement("div",{className:"row-list rel-rows"},React.createElement("div",{className:"rows"},actions)),React.createElement("div",{className:"add-new-container"},React.createElement("button",{className:"add-rel",onClick:_this.showActionSelector},React.createElement("i",{className:"fa fa-plus blue"})," Add")),React.createElement(TypeSelector,{visible:_this.state.showSelector,onClose:_this.closeSelector,onSelect:_this.state.selectorFn,type:_this.state.selectorType}))}}();if((typeof _ret==="undefined"?"undefined":_typeof(_ret))==="object")return _ret.v}else{return React.createElement("div",{className:"behavior-panel-content"},"There are no actions for behavior ",React.createElement("strong",null,"'",behaviorName,"'"),".")}}});exports.default=hasActionsPanel;